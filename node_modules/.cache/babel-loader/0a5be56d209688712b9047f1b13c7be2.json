{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\__Project\\\\SoccerStat\\\\soccer-stat-app\\\\src\\\\pages\\\\Matches.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { getMatches } from '../requests/getData';\nimport Loading from \"../components/Loading\";\nimport SportsSoccerIcon from '@material-ui/icons/SportsSoccer';\nimport PeopleIcon from '@material-ui/icons/People';\nimport TableLeagueMatches from \"../components/TableLeagueMatches\";\nimport CustomSelect from \"../components/Select\";\nimport { connect } from \"react-redux\";\nimport { getErrorMessage, nullifyErrorMessage, nullifyYearSeason, getDateFromTo, nullifyDateFromTo } from \"../redux/actions\";\nimport CustomDatePicker from \"../components/DatePicker\";\nimport { Button } from \"@material-ui/core\";\nimport { URL_LEAGUES, URL_COMANDS } from './../constants'; // TODO: Вынести интерфейсы в отдельный файл \n\nconst LeagueCalendar = props => {\n  _s();\n\n  const {\n    season,\n    getErrorMessage,\n    nullifyErrorMessage,\n    errorMessage,\n    nullifyYearSeason,\n    dateFromTo,\n    url\n  } = props;\n  const [league, setLeague] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [count, setCount] = useState(\"\");\n  const [idLocalState, setIdLocalState] = useState('');\n  const [yearSeason, setYearSeason] = useState('');\n  const [fromTo, setFromTo] = useState({\n    dateFrom: '',\n    dateTo: ''\n  });\n  const history = useHistory();\n\n  const getMatchesId = (idLeague, seasonLeague, getDateFromToLeague) => {\n    let year = '';\n\n    if (seasonLeague) {\n      year = seasonLeague;\n    }\n\n    let fromTo = '';\n\n    if (getDateFromToLeague) {\n      fromTo = getDateFromToLeague;\n    }\n\n    try {\n      getMatches(url, idLeague, year, fromTo).then(result => {\n        if (result.message) {\n          return getErrorMessage(result.message);\n        }\n\n        const matches = result.matches.map(item => {\n          return {\n            id: item.id,\n            awayTeam: item.awayTeam.name,\n            homeTeam: item.homeTeam.name,\n            winner: item.score.winner,\n            startDate: item.season.startDate,\n            endDate: item.season.endDate,\n            status: item.status\n          };\n        });\n        nullifyErrorMessage();\n        setLeague(matches);\n\n        if (url === URL_LEAGUES) {\n          setTitle(result.competition.name);\n        }\n\n        console.log('result.teams 94 ----- ', result); // if (url === URL_COMANDS) { setTitle(result.teams) }\n\n        setCount(result.count);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getMatchesFromTo = (id, dateFromTo) => {\n    nullifyYearSeason();\n    setFromTo({\n      dateFrom: '',\n      dateTo: ''\n    });\n    history.push(`?dateFrom=${dateFromTo.dateFrom}&dateTo=${dateFromTo.dateTo}`);\n    getMatchesId(id, null, dateFromTo);\n  };\n\n  useEffect(() => {\n    setYearSeason('');\n    setFromTo({\n      dateFrom: '',\n      dateTo: ''\n    });\n    let id = \"\";\n\n    if (url === URL_LEAGUES) {\n      id = history.location.pathname.substr(9);\n    }\n\n    if (url === URL_COMANDS) {\n      id = history.location.pathname.substr(7);\n    }\n\n    console.log('if (url === ', id);\n    console.log('history.location.pathname ', history.location.pathname);\n    setIdLocalState(id);\n    let idSeason = '';\n    let idDateFromTo = {\n      dateFrom: '',\n      dateTo: ''\n    };\n    setFromTo({\n      dateFrom: '',\n      dateTo: ''\n    });\n    setYearSeason('');\n\n    if (history.location.search.substr(1, 6) === 'season') {\n      console.log('history.location.search.substrsubstr(1, 6) - ', history.location.search.substr(1, 6));\n      idSeason = history.location.search.substr(-4);\n      setYearSeason(history.location.search.substr(-4));\n    }\n\n    if (history.location.search.substr(1, 8) === 'dateFrom') {\n      console.log('history.location.search.substr(1, 8) - ', history.location.search.substr(1, 8));\n      idDateFromTo = {\n        dateFrom: history.location.search.substr(10, 10),\n        dateTo: history.location.search.substr(-10)\n      };\n      setFromTo({\n        dateFrom: history.location.search.substr(10, 10),\n        dateTo: history.location.search.substr(-10)\n      });\n    }\n\n    if (id && idDateFromTo.dateFrom.length && idDateFromTo.dateTo.length) {\n      getMatchesId(id, null, idDateFromTo);\n    } else if (id && idSeason) {\n      getMatchesId(id, idSeason);\n    } else if (id && season) {\n      getMatchesId(id, season);\n    } else if (id) {\n      console.log('getMatchesId(id) ', id);\n      getMatchesId(id);\n    }\n  }, [season, dateFromTo]);\n  console.log('fromTo ', fromTo);\n  console.log('dateFromTo ', dateFromTo);\n\n  if (!league && !errorMessage) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 10\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [url === URL_LEAGUES ? /*#__PURE__*/_jsxDEV(SportsSoccerIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 28\n        }, this) : /*#__PURE__*/_jsxDEV(PeopleIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [title ? title : \"\", \"  \", errorMessage ? 0 : count, \" \\u043C\\u0430\\u0442\\u0447\\u0435\\u0439\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 4\n    }, this), url === URL_LEAGUES ? /*#__PURE__*/_jsxDEV(CustomSelect, {\n      startValue: yearSeason ? yearSeason : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: \"0\"\n      },\n      children: \"\\u0438\\u043B\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(CustomDatePicker, {\n      starDateFromTo: fromTo.dateFrom.length && fromTo.dateTo.length ? fromTo : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: \"search-matches\",\n      onClick: () => getMatchesFromTo(idLocalState, dateFromTo),\n      children: \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440 \\u043F\\u043E \\u0434\\u0430\\u0442\\u0435 (\\u0441, \\u043F\\u043E)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }, this), errorMessage ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        marginTop: '50px'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 6\n    }, this) : /*#__PURE__*/_jsxDEV(TableLeagueMatches, {\n      dataTable: league\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LeagueCalendar, \"EY69qkf7M9fIhT/Qh5f4ccPUhxc=\", false, function () {\n  return [useHistory];\n});\n\n_c = LeagueCalendar;\n\nconst mapStateToProps = state => ({\n  loading: state.app.loading,\n  season: state.leagues.season,\n  errorMessage: state.leagues.errorMessage,\n  dateFromTo: state.leagues.dateFromTo\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getErrorMessage: response => dispatch(getErrorMessage(response)),\n    nullifyErrorMessage: () => dispatch(nullifyErrorMessage()),\n    nullifyYearSeason: () => dispatch(nullifyYearSeason()),\n    getDateFromTo: respons => dispatch(getDateFromTo(respons)),\n    nullifyDateFromTo: () => dispatch(nullifyDateFromTo())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeagueCalendar);\n\nvar _c;\n\n$RefreshReg$(_c, \"LeagueCalendar\");","map":{"version":3,"sources":["D:/__Project/SoccerStat/soccer-stat-app/src/pages/Matches.tsx"],"names":["React","useState","useEffect","useHistory","getMatches","Loading","SportsSoccerIcon","PeopleIcon","TableLeagueMatches","CustomSelect","connect","getErrorMessage","nullifyErrorMessage","nullifyYearSeason","getDateFromTo","nullifyDateFromTo","CustomDatePicker","Button","URL_LEAGUES","URL_COMANDS","LeagueCalendar","props","season","errorMessage","dateFromTo","url","league","setLeague","title","setTitle","count","setCount","idLocalState","setIdLocalState","yearSeason","setYearSeason","fromTo","setFromTo","dateFrom","dateTo","history","getMatchesId","idLeague","seasonLeague","getDateFromToLeague","year","then","result","message","matches","map","item","id","awayTeam","name","homeTeam","winner","score","startDate","endDate","status","competition","console","log","error","getMatchesFromTo","push","location","pathname","substr","idSeason","idDateFromTo","search","length","marginTop","mapStateToProps","state","loading","app","leagues","mapDispatchToProps","dispatch","response","respons"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getMatches } from '../requests/getData';\r\nimport Loading from \"../components/Loading\";\r\nimport SportsSoccerIcon from '@material-ui/icons/SportsSoccer';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport TableLeagueMatches from \"../components/TableLeagueMatches\";\r\nimport CustomSelect from \"../components/Select\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n\tgetErrorMessage,\r\n\tnullifyErrorMessage,\r\n\tnullifyYearSeason,\r\n\tgetDateFromTo,\r\n\tnullifyDateFromTo\r\n} from \"../redux/actions\";\r\nimport CustomDatePicker from \"../components/DatePicker\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { URL_LEAGUES, URL_COMANDS } from './../constants';\r\n\r\n\r\n// TODO: Вынести интерфейсы в отдельный файл \r\nexport interface matchesInterface {\r\n\t[x: string]: any;\r\n\tid: number | string,\r\n\tawayTeam: any,\r\n\thomeTeam: any,\r\n\twinner: string,\r\n\tendDate: string,\r\n\tstartDate: string,\r\n\tstatus: string\r\n}\r\n\r\nexport interface objectSearchFromTo {\r\n\tdateFrom: number | string,\r\n\tdateTo: number | string,\r\n}\r\n\r\nconst LeagueCalendar = (props: any) => {\r\n\tconst {\r\n\t\tseason,\r\n\t\tgetErrorMessage,\r\n\t\tnullifyErrorMessage,\r\n\t\terrorMessage,\r\n\t\tnullifyYearSeason,\r\n\t\tdateFromTo,\r\n\t\turl\r\n\t} = props\r\n\r\n\tconst [league, setLeague] = useState(\"\")\r\n\tconst [title, setTitle] = useState(\"\")\r\n\tconst [count, setCount] = useState(\"\")\r\n\tconst [idLocalState, setIdLocalState] = useState('')\r\n\tconst [yearSeason, setYearSeason] = useState('')\r\n\tconst [fromTo, setFromTo] = useState({ dateFrom: '', dateTo: '' })\r\n\r\n\tconst history = useHistory()\r\n\r\n\tconst getMatchesId = (idLeague: any, seasonLeague?: any, getDateFromToLeague?: any) => {\r\n\t\tlet year = '';\r\n\t\tif (seasonLeague) {\r\n\t\t\tyear = seasonLeague;\r\n\t\t}\r\n\t\tlet fromTo = '';\r\n\t\tif (getDateFromToLeague) {\r\n\t\t\tfromTo = getDateFromToLeague;\r\n\t\t}\r\n\t\ttry {\r\n\r\n\t\t\tgetMatches(url, idLeague, year, fromTo).then(result => {\r\n\r\n\t\t\t\tif (result.message) {\r\n\t\t\t\t\treturn getErrorMessage(result.message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst matches = result.matches.map((item: matchesInterface) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\tawayTeam: item.awayTeam.name,\r\n\t\t\t\t\t\thomeTeam: item.homeTeam.name,\r\n\t\t\t\t\t\twinner: item.score.winner,\r\n\t\t\t\t\t\tstartDate: item.season.startDate,\r\n\t\t\t\t\t\tendDate: item.season.endDate,\r\n\t\t\t\t\t\tstatus: item.status\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tnullifyErrorMessage()\r\n\t\t\t\tsetLeague(matches)\r\n\t\t\t\tif (url === URL_LEAGUES) { setTitle(result.competition.name) }\r\n\t\t\t\tconsole.log('result.teams 94 ----- ', result)\r\n\t\t\t\t// if (url === URL_COMANDS) { setTitle(result.teams) }\r\n\t\t\t\tsetCount(result.count)\r\n\t\t\t})\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst getMatchesFromTo = (id: number | string, dateFromTo: objectSearchFromTo) => {\r\n\t\tnullifyYearSeason()\r\n\t\tsetFromTo({ dateFrom: '', dateTo: '' })\r\n\t\thistory.push(`?dateFrom=${dateFromTo.dateFrom}&dateTo=${dateFromTo.dateTo}`)\r\n\t\tgetMatchesId(id, null, dateFromTo)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetYearSeason('')\r\n\t\tsetFromTo({ dateFrom: '', dateTo: '' })\r\n\t\tlet id = \"\";\r\n\t\tif (url === URL_LEAGUES) { id = history.location.pathname.substr(9) }\r\n\t\tif (url === URL_COMANDS) { id = history.location.pathname.substr(7) }\r\n\t\tconsole.log('if (url === ', id)\r\n\r\n\t\tconsole.log('history.location.pathname ', history.location.pathname)\r\n\t\tsetIdLocalState(id)\r\n\r\n\t\tlet idSeason = '';\r\n\t\tlet idDateFromTo = {\r\n\t\t\tdateFrom: '',\r\n\t\t\tdateTo: ''\r\n\t\t}\r\n\t\tsetFromTo({ dateFrom: '', dateTo: '' })\r\n\t\tsetYearSeason('')\r\n\r\n\r\n\t\tif (history.location.search.substr(1, 6) === 'season') {\r\n\r\n\t\t\tconsole.log('history.location.search.substrsubstr(1, 6) - ', history.location.search.substr(1, 6))\r\n\r\n\t\t\tidSeason = history.location.search.substr(-4);\r\n\t\t\tsetYearSeason(history.location.search.substr(-4))\r\n\t\t}\r\n\r\n\r\n\t\tif (history.location.search.substr(1, 8) === 'dateFrom') {\r\n\r\n\t\t\tconsole.log('history.location.search.substr(1, 8) - ', history.location.search.substr(1, 8));\r\n\t\t\tidDateFromTo = {\r\n\t\t\t\tdateFrom: history.location.search.substr(10, 10),\r\n\t\t\t\tdateTo: history.location.search.substr(-10)\r\n\t\t\t}\r\n\t\t\tsetFromTo({\r\n\t\t\t\tdateFrom: history.location.search.substr(10, 10),\r\n\t\t\t\tdateTo: history.location.search.substr(-10)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t\tif (id && idDateFromTo.dateFrom.length && idDateFromTo.dateTo.length) {\r\n\t\t\tgetMatchesId(id, null, idDateFromTo)\r\n\t\t} else if (id && idSeason) {\r\n\t\t\tgetMatchesId(id, idSeason);\r\n\t\t} else if (id && season) {\r\n\t\t\tgetMatchesId(id, season);\r\n\t\t} else if (id) {\r\n\t\t\tconsole.log('getMatchesId(id) ', id)\r\n\t\t\tgetMatchesId(id);\r\n\t\t}\r\n\r\n\t}, [season, dateFromTo])\r\n\r\n\tconsole.log('fromTo ', fromTo)\r\n\tconsole.log('dateFromTo ', dateFromTo)\r\n\r\n\tif (!league && !errorMessage) {\r\n\t\treturn <Loading />\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1><>\r\n\t\t\t\t{url === URL_LEAGUES ? <SportsSoccerIcon /> : <PeopleIcon />}\r\n\t\t\t\t<span>{title ? title : \"\"}  {errorMessage ? 0 : count} матчей</span></></h1>\r\n\r\n\t\t\t{url === URL_LEAGUES\r\n\t\t\t\t?\r\n\t\t\t\t<CustomSelect startValue={yearSeason ? yearSeason : \"\"} />\r\n\t\t\t\t:\r\n\t\t\t\tnull\r\n\t\t\t}\r\n\r\n\t\t\t<h3 style={{ marginTop: \"0\" }}>или</h3>\r\n\r\n\t\t\t<CustomDatePicker\r\n\t\t\t\tstarDateFromTo={fromTo.dateFrom.length && fromTo.dateTo.length ? fromTo : \"\"}\r\n\t\t\t/>\r\n\t\t\t<Button className='search-matches' onClick={() => getMatchesFromTo(idLocalState, dateFromTo)}>Фильтр по дате (с, по)</Button>\r\n\t\t\t{\r\n\t\t\t\terrorMessage\r\n\t\t\t\t\t?\r\n\t\t\t\t\t<h1 style={{ marginTop: '50px' }}>{errorMessage}</h1>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t< TableLeagueMatches dataTable={league} />\r\n\t\t\t}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n\tloading: state.app.loading,\r\n\tseason: state.leagues.season,\r\n\terrorMessage: state.leagues.errorMessage,\r\n\tdateFromTo: state.leagues.dateFromTo,\r\n})\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n\treturn {\r\n\t\tgetErrorMessage: (response: string) => dispatch(getErrorMessage(response)),\r\n\t\tnullifyErrorMessage: () => dispatch(nullifyErrorMessage()),\r\n\t\tnullifyYearSeason: () => dispatch(nullifyYearSeason()),\r\n\t\tgetDateFromTo: (respons: object) => dispatch(getDateFromTo(respons)),\r\n\t\tnullifyDateFromTo: () => dispatch(nullifyDateFromTo()),\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LeagueCalendar);"]},"metadata":{},"sourceType":"module"}